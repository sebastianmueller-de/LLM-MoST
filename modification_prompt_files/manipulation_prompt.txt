In this step, you will implement the modification desired by the user. You will be provided with the complete SUMO route file, which you will have to modify accordingly. Always use the route file from the most recent prompt, even though you may have seen a similar one before. Return the complete and updated file in your output. Do not include anything else.
The user may want to change the trajectories of any amount of vehicles, by providing you with the IDs of the vehicles, as well as the IDs of the target edges. Using your knowledge about the .net file from the past conversation, evaluate if the connections between the starting edge of a given vehicle and the target edge are legitimate. Do not forget to consider transitive connections. If the user requests a route to end at a specific edge, always try to implement it, as long as the connections between the edges are valid. Do not change the starting edge of a vehicle, unless the user explicitly requests it.

Here is a list of examples to support your in your reasoning:

User input: I want vehicle 20054 to move to lane 211
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20054" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544"/>
	</vehicle>
	<vehicle id="20055" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="111.66148318516345">
		<route edges="544"/>
	</vehicle>
</routes>
Prior knowledge: There is a connection from edge 544 to edge 211. All vehicles are allowed on these edges.
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20054" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544 211"/>
	</vehicle>
	<vehicle id="20055" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="111.66148318516345">
		<route edges="544"/>
	</vehicle>
</routes>
Reasoning: We identify vehicle 20054 in the route file via its vehicle id. Since all vehicles are allowed on both edges, and they are directly connected to each other, we can simply append the desired edge.

User input: 20007 moves to 80
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20004" depart="0.1" departSpeed="0.9754" type="car_dynamic" departLane="0" departPos="33.98909867513353">
		<route edges="58 507"/>
	</vehicle>
	<vehicle id="20007" depart="0.1" departSpeed="0.9443" type="car_dynamic" departLane="0" departPos="25.367667309885984">
		<route edges="58"/>
	</vehicle>
</routes>
Prior knowledge: Edge 58 is connected to 507, 600, and 700. Edge 507 is connected to edge 21. Edge 600 is connected to edge 80. There are no vehicle restrictions on any roads.
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20004" depart="0.1" departSpeed="0.9754" type="car_dynamic" departLane="0" departPos="33.98909867513353">
		<route edges="58 507"/>
	</vehicle>
	<vehicle id="20007" depart="0.1" departSpeed="0.9443" type="car_dynamic" departLane="0" departPos="25.367667309885984">
		<route edges="58 600 80"/>
	</vehicle>
</routes>
Reasoning: We identify vehicle 20007 in the route file via its vehicle id. We see that it starts at edge 58. There are no vehicles disallowed, so we do not have to worry about that. From the knowledge of the .net file we know that 58 is not directly connected to 80. However, it is connected to edge 600, which eventually leads to edge 80. Therefore, we use this transitive property and add the edges to the route in order of traversal.

User input: vehicle 333 moves to road 10
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="333" depart="0.1" departSpeed="0.5" type="car_dynamic" departLane="0" departPos="55.0">
		<route edges="7"/>
	</vehicle>
</routes>
Prior knowledge: Edge 7 is connected to edges 10 and 15. Edge 10 is further connected to edge 20.
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="333" depart="0.1" departSpeed="0.5" type="car_dynamic" departLane="0" departPos="55.0">
		<route edges="7 10"/>
	</vehicle>
</routes>
Reasoning: Even though edge 10 is not an edge leading out of the simulation, and has other edges coming after it, we still allow the user's specification. If a vehicle route ends at an edge in the middle of the map, that is fine for us, and the modification should be completed.


The user may request you to change the driving behavior of specific vehicles in a SUMO routes file. To do this:
- Always select one of the defined behavior presets (listed below) that best matches the user request.
- Never invent new parameters unless explicitly instructed by the user.
- When modifying a vehicleâ€™s behavior:
    - Insert a <vType> entry for the chosen preset, with a unique id.
    - Assign this type to the requested vehicle(s).
- Always return the full updated route file, not just the modified elements.
- Do not use any shortcuts for describing existing vehicles. Always list the whole route file in your output, ready to be used directly in SUMO.


Available Behavior Presets
-------------------------------------------

Balanced Driver:
<vType id="balancedType" accel="2.5" decel="4.5" sigma="0.5" minGap="2.0" tau="1.2" speedFactor="1.0" impatience="0.3" lcStrategic="0.5" lcCooperative="0.5" lcSpeedGain="0.5" lcKeepRight="0.7"/>

Eco Driver:
<vType id="ecoType" accel="1.2" decel="2.5" sigma="0.3" minGap="3.0" tau="1.8" speedFactor="0.95" impatience="0.1" lcStrategic="0.3" lcCooperative="0.8" lcSpeedGain="0.1" lcKeepRight="0.9"/>

Emergency Driver:
<vType id="emergencyType" accel="4.0" decel="6.0" sigma="0.2" minGap="1.0" tau="0.5" speedFactor="1.3" impatience="0.8" lcStrategic="0.9" lcCooperative="0.0" lcSpeedGain="1.0" lcKeepRight="0.2"/>

Cautious Driver:
<vType id="cautiousType" accel="1.5" decel="3.0" sigma="0.4" minGap="4.0" tau="2.0" speedFactor="0.95" impatience="0.1" lcStrategic="0.3" lcCooperative="0.9" lcSpeedGain="0.2" lcKeepRight="0.8"/>

Aggressive Lane-Changer:
<vType id="aggressiveLaner" accel="3.0" decel="5.0" sigma="0.6" minGap="1.5" tau="0.8" speedFactor="1.05" impatience="0.7" lcStrategic="1.0" lcCooperative="0.0" lcSpeedGain="1.0" lcKeepRight="0.3"/>

Speeder (10% faster):
<vType id="fastDriver" accel="2.5" decel="4.5" sigma="0.5" minGap="2.0" tau="1.0" speedFactor="1.1" impatience="0.4" lcStrategic="0.5" lcCooperative="0.5" lcSpeedGain="0.5" lcKeepRight="0.6"/>


Few-Shot Examples
-------------------------------------------

User input:
Make vehicle 10 a balanced driver.

Input file (routes.xml):
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vehicle id="10" type="defaultCar" depart="5"/>
</routes>

Output:
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vType id="balancedType" accel="2.5" decel="4.5" sigma="0.5" minGap="2.0" tau="1.2"
           speedFactor="1.0" impatience="0.3" lcStrategic="0.5"
           lcCooperative="0.5" lcSpeedGain="0.5" lcKeepRight="0.7"/>
    <vehicle id="10" type="balancedType" depart="5"/>
</routes>


User input:
Make vehicle 23 drive more ecologically.

Input file (routes.xml):
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vehicle id="23" type="defaultCar" depart="12"/>
    <vehicle id="25" type="defaultCar" depart="16"/>
    <vehicle id="60" type="defaultCar" depart="20"/>
</routes>

Output:
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vType id="ecoType" accel="1.2" decel="2.5" sigma="0.3" minGap="3.0" tau="1.8"
           speedFactor="0.95" impatience="0.1" lcStrategic="0.3"
           lcCooperative="0.8" lcSpeedGain="0.1" lcKeepRight="0.9"/>
    <vehicle id="23" type="ecoType" depart="12"/>
    <vehicle id="25" type="defaultCar" depart="16"/>
    <vehicle id="60" type="defaultCar" depart="20"/>
</routes>


User input:
Make vehicle 42 more cautious.

Input file (routes.xml):
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vType id="truck" accel="2.8" decel="4.5" sigma="0.1" minGap="0.5" tau="1.0"/>
    <vehicle id="42" type="defaultCar" depart="5"/>
    <vehicle id="44" type="defaultCar" depart="7"/>
    <vehicle id="56" type="truck" depart="7"/>
</routes>

Output:
<routes>
    <vType id="defaultCar" accel="2.6" decel="4.5" sigma="0.5" minGap="2.5" tau="1.0"/>
    <vType id="truck" accel="2.8" decel="4.5" sigma="0.1" minGap="0.5" tau="1.0"/>
    <vType id="cautiousType" accel="1.5" decel="3.0" sigma="0.4" minGap="4.0" tau="2.0"
           speedFactor="0.95" impatience="0.1" lcStrategic="0.3"
           lcCooperative="0.9" lcSpeedGain="0.2" lcKeepRight="0.8"/>
    <vehicle id="42" type="cautiousType" depart="5"/>
    <vehicle id="44" type="defaultCar" depart="7"/>
    <vehicle id="56" type="truck" depart="7"/>
</routes>

The user may also request you to add vehicles to the simulation. If the user does not specify certain attributes, use the following fallback logic:

1. **Vehicle Type**: Reuse or extend existing `<vType>` definitions from the current route file, but make sure the type fits the user's description. If the user wants a truck, and no vehicle of type truck exists, create that vehicle type. If a user desires a bus or a bicycle, follow the same logic.
2. **Route**: If no specific route is given, automatically generate a realistic route based on the network topology in the net file. Use through roads and avoid U-turns or dead-ends unless explicitly requested. A generated route does not need to end at an edge leaving the simulation.
3. **depart / departPos / departSpeed**:
   - `depart`: Use a realistic simulation time (always use a float here - try to stay in the same time range as most other vehicles).
   - `departPos`: Default to `"free"` to avoid insertion collisions.
   - `departSpeed`: Use `"max"` or `"random"` unless the user specifies otherwise.
4. **Vehicle ID**: Ensure every vehicle has a unique id string. Make sure the id consists of an integer, as seen in the examples later.
5. **Lane/Edge Constraints**: Respect edge connectivity from the net file when generating routes. Do not assign vehicles to non-drivable edges (e.g., footpaths).

Below are examples of different vehicle types in proper SUMO format. You can use these as base templates:

Template: Truck
<vType id="truck" accel="0.8" decel="4.5" sigma="0.5" length="12" minGap="3" maxSpeed="25" guiShape="truck" vClass="truck"/>
<vehicle id="1" type="truck" route="r1" depart="0.1" departPos="free" departSpeed="max"/>

Template: Bus
<vType id="bus" accel="0.6" decel="4.0" sigma="0.5" length="15" minGap="3" maxSpeed="20" guiShape="bus" vClass="bus"/>
<vehicle id="2" type="bus" route="r2" depart="0.1" departPos="free" departSpeed="random"/>

Template: Passenger Car
<vType id="car" accel="1.2" decel="4.5" sigma="0.5" length="4.5" minGap="2.5" maxSpeed="33" guiShape="passenger" vClass="passenger"/>
<vehicle id="3" type="car" route="r4" depart="0.1" departPos="free" departSpeed="random"/>

As before, return the full updated XML file. Here is an example:

User input: Add a car to edge 533
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="30" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544 577"/>
	</vehicle>
</routes>
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="30" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544 577"/>
	</vehicle>
	<vehicle id="1" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="533"/>
	</vehicle>
</routes>
Reasoning: The user desires no specific parameters, so we simply add an instance of the already present vehicle. We chose the free id of 1.

User input: Add a truck to edge 20
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="500" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="5 7"/>
	</vehicle>
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vType id="truck" accel="0.8" decel="4.5" sigma="0.5" length="12" minGap="3" maxSpeed="25" guiShape="truck" vClass="truck"/>
	<vehicle id="500" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="5 7"/>
	</vehicle>
	<vehicle id="1" type="truck" route="r1" depart="0.1" departPos="free" departSpeed="max">
			<route edges="20"/>
	</vehicle>
</routes>
Reasoning: We use the truck preset and place it at edge 20.

The user may also request you to remove vehicles from the simulation. In this case, simply remove the object from the XML file. Example:

User input: Remove vehicle 20055
Route file:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20054" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544"/>
	</vehicle>
	<vehicle id="20055" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="111.66148318516345">
		<route edges="544"/>
	</vehicle>
</routes>
Output:
<routes>
	<vType id="car_dynamic" guiShape="passenger" vClass="passenger" probability="1.0" length="5.0" width="2.0" minGap="2.5" accel="2.35" decel="5.25" maxSpeed="50.0" lcStrategic="55.00" lcSpeedGain="11.50" lcCooperative="2.00" sigma="0.57" speedDev="0.15" speedFactor="1.00" lcImpatience="0.25" impatience="0.25" lcMaxSpeedLatStanding="0.00" lcSigma="0.15" lcKeepRight="0.85"/>
	<vehicle id="20054" depart="0.1" departSpeed="0.0" type="car_dynamic" departLane="0" departPos="120.6179005592607">
		<route edges="544"/>
	</vehicle>
</routes>

Here is the route file specific to this modification, which you should update and return in your output:

